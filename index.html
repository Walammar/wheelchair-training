<!doctype html>
<html>
<head>
  <meta charset="utf-8" />
  <title>Wheelchair Training — Absolute Position Control</title>
  <script src="https://cdn.jsdelivr.net/npm/phaser@3.60.0/dist/phaser.min.js"></script>
  <style>
    body { margin:0; background:#222; color:#fff; font-family:sans-serif; }
    #instructions {
      position:absolute; top:10px; left:10px; 
      background:rgba(0,0,0,0.5); padding:10px; border-radius:8px;
    }
  </style>
</head>
<body>

<div id="instructions">
  <h2>Wheelchair Training</h2>
  <p>Move your Optima joystick (mouse input) to control the red circle.<br>
  Reach the green square to win.</p>
</div>

<script>
(() => {
  const config = {
    type: Phaser.AUTO,
    width: 800,
    height: 600,
    backgroundColor: '#111',
    physics: { default: 'arcade', arcade: { debug:false } },
    scene: { preload, create, update }
  };
  const game = new Phaser.Game(config);

  let player, vx=0, vy=0, goal, walls;

  function preload(){}

  function create(){
    const scene = this;

    // Player - large red circle for visibility
    player = this.add.circle(400,300,50,0xff0000);
    this.physics.add.existing(player);
    player.body.setCollideWorldBounds(true);

    // Walls
    walls = this.physics.add.staticGroup();
    walls.create(400,10,'').setDisplaySize(800,20).refreshBody();
    walls.create(400,590,'').setDisplaySize(800,20).refreshBody();
    walls.create(10,300,'').setDisplaySize(20,600).refreshBody();
    walls.create(790,300,'').setDisplaySize(20,600).refreshBody();

    // Goal
    goal = this.add.rectangle(740,540,60,60,0x00ff00);
    this.physics.add.existing(goal,true);

    this.physics.add.collider(player,walls);
    this.physics.add.overlap(player,goal,()=>alert("✅ Goal Reached!"));

    // Pointer move - absolute position relative to center
    this.input.on('pointermove', (pointer) => {
      const rect = this.game.canvas.getBoundingClientRect();
      const cx = rect.width / 2;
      const cy = rect.height / 2;

      const dx = (pointer.x - cx) / (rect.width / 2);
      const dy = (pointer.y - cy) / (rect.height / 2);

      vx = dx * 300; // scale factor for speed
      vy = dy * 300;
    });
  }

  function update(){
    player.body.setVelocity(vx, vy);
  }
})();
</script>

</body>
</html>
